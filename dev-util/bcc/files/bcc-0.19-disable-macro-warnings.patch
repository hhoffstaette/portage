commit 828388e0006c2b79ada66e2d1556b27f7018f967
Author: Holger Hoffst√§tte <holger@applied-asynchrony.com>
Date:   Tue Apr 27 21:38:50 2021 +0200

    Disable -Wmacro-redefined.
    
    Clang warns of macro redefinitions by default. Usually this is
    a Good Thing, but running the tools results in noisy macro warnings
    depending on kernel version. This is a bit useless since the last
    definition still always wins. Disabling the warning changes nothing.

diff --git a/src/cc/frontends/clang/kbuild_helper.cc b/src/cc/frontends/clang/kbuild_helper.cc
index 5bed2721..8127d7d6 100644
--- a/src/cc/frontends/clang/kbuild_helper.cc
+++ b/src/cc/frontends/clang/kbuild_helper.cc
@@ -134,6 +134,7 @@ int KBuildHelper::get_flags(const char *uname_machine, vector<string> *cflags) {
 
   cflags->push_back("-Wno-unused-value");
   cflags->push_back("-Wno-pointer-sign");
+  cflags->push_back("-Wno-macro-redefined");
   cflags->push_back("-fno-stack-protector");
 
   return 0;
